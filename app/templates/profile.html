{% extends "base.html" %}

{% block content %}
<h1 class="title">
  Welcome, {{ name }}!
</h1>

<div class="column is-4 is-offset-4">
  <h3 class="title">Update user profile</h3>
  <div class="box">
    {% with errors = get_flashed_messages(category_filter=["error"]) %}
    {% if errors %}
      <div class="notification is-danger">
        {{ errors[0] }}
      </div>
    {% endif %}
    {% endwith %}

    {% with messages = get_flashed_messages(category_filter=["ok"]) %}
    {% if messages %}
      <div class="notification is-success">
        {{ messages[0] }}
      </div>
    {% endif %}
    {% endwith %}
    <form method="POST" action="/profile">
      <div class="field">
        <div class="control">
          <input class="input is-large" type="email" name="email" placeholder="Email" autofocus="">
        </div>
      </div>

      <div class="field">
        <div class="control">
          <input class="input is-large" type="text" name="name" placeholder="Name" autofocus="">
        </div>
      </div>

      <div class="field">
        <div class="control">
          <input class="input is-large" type="password" name="new_password" placeholder="New Password">
        </div>
      </div>

      <div class="field">
        <div class="control">
          <input class="input is-large" type="password" name="old_password" placeholder="Old Password">
        </div>
      </div>

      <button class="button is-block is-info is-large is-fullwidth">Update</button>
    </form>
  </div>
</div>
{% endblock %}